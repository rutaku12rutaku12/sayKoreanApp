# <img src="https://github.com/rutaku12rutaku12/sayKoreanApp/blob/dongjin/src/main/saykorean/public/img/hosuni.png" width="100" height="100"/> 재밌는한국어 

## 💻 프로젝트 소개
- **프로젝트 완성일**: 2025.11.27

## 📖 프로젝트 개요
내수 시장이 줄어드는 반면 한류 시장이 커지고 있으며, 한국인의 문화적 관점에서 만든 한국어 교육 앱이 부재합니다. 이에 해외 문화권 사용자를 대상으로 한국의 언어와 문화를 함께 교육하는 서비스를 제공하고자 프로젝트를 시작했습니다.

## 🎯 기획 목표
1. 사용자에게 한국의 언어와 문화를 함께 교육하는 한국형 교육·커뮤니티 플랫폼 구축.
2. 한국의 전통 요소를 살린 캐릭터를 기반으로 문화를 체험하게하는 UI 제공.
   - ex) 갓을 쓴 토끼, 족두리를 쓴 호랑이 마스코트 이모티콘

## 📅 프로젝트 일정
- **1주차**: 주제 선정, 기획서 작성
- **2주차**: 1차 기능 설계 및 코드 작업, 플러터 UI 레이아웃
- **3주차**: 2차 기능 설계 및 코드 작업, 플러터 UI 완성
- **4주차**: 코드 병합 후 최종 테스트, 코드리뷰 및 트러블슈팅, 프레젠테이션

## 🧑‍💻 팀원 역할
- **정유진**: 프로토타입, 사용자단 교육 & 시험, 사용자단 UI, 시험 채점 API, 설정, 언어 변경, 테마 스토어 기능, 스토어와 연동된 포인트 기능
- **최규호**: 회원 계정 기능(회원가입, 로그인, 이메일/비밀번호 찾기, 정보 조회 등), 출석 기능, JWT 기반 사용자 인증 인가 기능, SMTP 기반 메일 기능
- **최동진**: 기획, (구)프로토타입, 관리자단 교육 & 시험 & 회원 & 게임, 관리자단 UI, 랭킹, 자동 번역 API, TTS API, DB 통계 기반 랭킹 기능, JS 기반 한글 게임 기능, 시험모드 추가(무한모드/하드모드)
- **정은주**: Git 버전 관리, WebSocket 기반 실시간 채팅 기능, 채팅과 연동된 친구 기능, 채팅 메시지 히스토리 저장/조회, 다국어(i18n) 설정 기능

## 🛠️ 기술 스택

### Backend
- Java
- Spring Boot
- Spring Security
- MyBatis
- MySQL
- Lombok
- Bcrypt
- Validation
- JPA

### Frontend
- React
- Redux
- Redux-Persist
- React-Router-DOM
- JSX
- JavaScript
- CSS

### API & Library
- Google Cloud Translation API
- Google Cloud Text-to-Speech API
- Google Gemini API
- Crizin (발음기호 라이브러리)
- reCAPTCHA
- i18next (언어 변경)
- JJWT
- WebSocket
- Apache POI

### 추가사항

#### 시스템 설계
- **메뉴 구조**: 관리자(교육 관리, 시험 관리, 회원 관리, 게임 관리), 사용자(교육, 시험, 마이페이지, 랭킹, 게임, 스토어, 채팅, 친구)
- **DB 설계**: ERD 기반 PK/FK 구조, 관리자/사용자 도메인 분리
- **기능 흐름도**: 교육 등록(관리자) -> 시험 등록(관리자) -> 마이페이지 언어 선택(사용자) -> 교육 조회(사용자) -> 시험 조회(사용자) -> 랭킹 조회(사용자)

#### 주요 기능
- 스프링 시큐리티 & 비크립트 기반 인증 및 보안 처리
- JWT 기반 사용자 인증 인가 기능
- SMTP 기반 비밀번호 재설정 메일 발송
- 마스코트 캐릭터 이미지, TTS 등을 활용한 교육
- 그림, 음성, 주관식으로 이루어진 시험
- 시험모드 선택 기능(무한모드/하드모드)
- 다국어 언어 지원
- JS 기반 한글 게임 & 랭킹 연동
- 스토어와 연동된 포인트 구매 기능
- 테마 설정 기능

#### 코드 리뷰
- **JWT 토큰을 이용한 사용자 검증 및 정보 추출**
  - JWT 서명에 사용할 비밀키 생성 후, JWT 발급하는 로직
  - ① token 변수에 JWT를 생성하고 payload에 필요한 정보를 담은 뒤, 비밀키를 이용해 signature를 적용하여 최종 JWT 발급
  - 발급된 토큰을 검증 후 정보를 반환하는 로직
  - ② token을 매개변수로 받아 비밀키를 지정 후 검증한다.
  - ③ 검증 성공 시 ①에서 넣어준 값 반환
  - JWT / 세션 분기 처리
  - 클라이언트 타입에 따라서 JWT 방식과 세션 방식으로 나눠서 인증 · 인가 처리
  - ① HTTP 요청 Header에서 임의로 만든 헤더 정보를 가져와서 그 정보 안에 값이 flutter면 JWT 방식으로 처리한다.
  - ② 아니면 세션 방식으로 처리한다.

- **다국어 전문가 검토 위한 전체 예문 다운로드**
  - 다국어 예문을 엑셀 파일로 다운로드하여, 해당 언어 전문가에게 컨펌 받을 파일을 만드는 로직입니다.
  - Google Translate API를 활용해 만든 교육 로직은 클라이언트에서 빠르게 다국어를 번역한 후 데이터를 저장할 수 있다는 장점이 있었지만, 번역 품질이 고르지 않다는 단점이 있었습니다.
  - 때문에 다국어별 예문을 json 형식으로 저장해야할 필요성을 느꼈고, 파싱한 데이터를 엑셀로 다운로드할 수 있는 Apache POI 라이브러리를 사용했습니다.
  - ① 장르와 주제, 예문 데이터를 조회한 후, 각 언어 별 시트를 생성합니다.
  - ② 언어 별로 예문을 저장할 시트를 생성합니다.
  - ③ 예문을 담을 셀을 생성합니다. 이때 6번째 셀에 수정된 내용을 작성할 셀을 만듭니다.
  - ④ 언어 코드에 따라 예문 값을 반환하여, 각 시트에 올바른 값이 들어가도록 합니다.

#### 트러블 슈팅
- **세션 인증 실패**
  - 문제정의 
  - 백엔드에서 세션 기반 인증을 사용했으나, 리액트 프로젝트를 플러터로 리팩토링하면서 플러터 환경에서 세션 연결이 유지되지 않는 문제 발생
  - 원인추론 
  - 1. 플러터는 세션 유지가 자동으로 되지 않음. 
  - 2. CookieManager 라이브러리를 사용하여 쿠키와 세션을 연결했으나, 페이지로 이동 시 유지가 되지 않음.
  - 3. 웹은 위의 방식으로 유지됐지만 앱은 인증이 유지되지 않음
  - 해결책 구현 
  - 1. 클라이언트 타입에 따라 인증 방식을 분리하여 웹은 세션 방식, 앱은 JWT 방식으로 리팩토링
  - 2. 기존 컨트롤러에서 세션을 사용하던 메소드를 위의 방식으로 리팩토링하여 문제 해결
   
- **시험 로직 강화를 위한 무한모드 / 하드모드 개발 과정 변천사**
- 문제정의 
- 기존 정기시험 로직은 DB에 저장된 문항이 출제되며, 그림/음성/주관식 순서대로 출제됩니다. 사용자가 암기를 통해서 돌파할 수 있는 시험 외에도 도전의식을 불러올 수 있는 시험 출제 방식의 필요성을 느꼈습니다. 
- 원인추론 
- 그래서 사용자가 열람한 주제의 예문을 호출하는 시험을 ‘무한모드’로 정의하고, DB에 저장된 모든 주제의 
예문을 호출하는 시험을 ‘하드모드’라 정의했습니다. 새로운 시험 방식을 정의했지만, 기대했던 난수화된 
문항이 나오는 대신 고정된 문항 데이터가 등장했습니다. 
- 해결책 구현 
- 매번 달라지는 시험을 제공할 거라면, DB에 시험문항을 저장하는 기존의 로직을 버려야했습니다. 관리자단의 로직을 모두 지우고, 클라이언트가 시험에 접근했을 때 난수화된 문항을 새롭게 생성하도록 만들었습니다. 
주관식 문항의 경우, AI 채점 로직 때문에 3초 이상의 딜레이가 걸렸기에 무한모드/하드모드의 UX를 고려하여 생성되지 않도록 바꿨습니다.


#### 향후 개선 방향
- **AI 기술 활용 로직 구현**: 생성형 이미지 기능으로 관리자 교육 등록 간편화 및 AI 챗봇 기능으로 캐릭터와 묻고 답하는 교육 방식 제공
- **난이도 / 교육방식 커스텀**: 말하기, 듣기, 읽기, 쓰기 등 기본 교육방식에 따른 예문 제공 및 초보자부터 명예한국인에 이르는 난이도 시스템 제공
- **채팅 기능 구체화 ex) 이모티콘**: 토돌이, 호순이 커플티콘 출시로 사용자 리텐션 유지 및 BM 구현 가능
- **결제 시스템 추가**: 라이트 사용자 무료 기반 서비스 제공 및 코어 사용자 구독형 콘텐츠 제공과 미성년자 대상 모든 콘텐츠 무료
